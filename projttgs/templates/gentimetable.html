{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Scheduler | Generated Timetable</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

<style>
body {
    background: #f5f7f7;
    font-family: "Segoe UI", sans-serif;
}

h1 {
    margin-top: 20px;
    font-size: 2rem;
    color: #257a7a;
    text-align: center;
    font-weight: 650;
}

.secHead {
  margin-top: 40px;
  text-align: center;
  font-size: 1.4rem;
  color: #257a7a;
  font-weight: 600;
}

.table2 {
  margin: 30px auto;
  width: 95%;
  border-collapse: collapse;
  background: #ffffff;
  box-shadow: 0 4px 14px rgba(0,0,0,0.08);
}

.table2 th {
  background: #e3f2fd;
  color: #1b4f72;
  padding: 8px;
  text-align: center;
  font-size: 13px;
  border: 1px solid #d0d7de;
}

.table2 td {
  border: 1px solid #e0e0e0;
  height: 80px;
  vertical-align: middle;
  text-align: center;
  background: #fafcfc;
  font-size: 13px;
}

/* Lab block */
.lab-box {
  background: #e3f2fd;
  border: 2px solid #90caf9;
  border-radius: 6px;
  padding: 10px;
  font-weight: 600;
}

/* Regular class */
.class-box {
  background: #f5f5f5;
  border: 1px solid #d0d7de;
  border-radius: 4px;
  padding: 6px;
}

/* Lunch cell */
.lunch-cell {
  background: #ffffff;
  font-weight: 700;
  font-size: 13px;
  color: #333;
}
</style>
</head>
<body>

<h1>Scheduler | Generated Timetable</h1>

{% block content %}

{% for table in tables %}
  <h2 class="secHead">
    {{ table.section.section_id }} ({{ table.section.department.dept_name }})
  </h2>

  <table class="table2">
    <thead>
      <tr>
        <th>DAY</th>
        <th>{{ SLOT_LABELS.1 }}</th>
        <th>{{ SLOT_LABELS.2 }}</th>
        <th>{{ SLOT_LABELS.3 }}</th>
        <th>{{ SLOT_LABELS.4 }}</th>
        <th>{{ SLOT_LABELS.5 }}</th>  {# LUNCH #}
        <th>{{ SLOT_LABELS.6 }}</th>
        <th>{{ SLOT_LABELS.7 }}</th>
        <th>{{ SLOT_LABELS.8 }}</th>
        <th>{{ SLOT_LABELS.9 }}</th>
      </tr>
    </thead>

    <tbody>
    {% for row in table.rows %}
      <tr>
        <th style="background:#ffffff; font-weight:600; color:#000;">
          {{ row.day }}
        </th>

        {% for cell in row.cells %}
          {% if cell.type == "lunch" %}
            <td colspan="{{ cell.colspan }}" class="lunch-cell">
              LUNCH
            </td>

          {% elif cell.type == "lab" %}
            <td colspan="{{ cell.colspan }}">
              <div class="lab-box">
                <strong>{{ cell.lab.course.course_name }}</strong><br>
                {{ cell.lab.instructor.name }}<br>
                {{ cell.lab.room.r_number }}
              </div>
            </td>

          {% elif cell.type == "class" %}
            <td colspan="{{ cell.colspan }}">
              {% for cls in cell.classes %}
                <div class="class-box">
                  <strong>{{ cls.course.course_name }}</strong><br>
                  {{ cls.instructor.name }}<br>
                  {{ cls.room.r_number }}
                </div>
              {% endfor %}
            </td>

          {% else %}
            <td colspan="{{ cell.colspan }}"></td>
          {% endif %}
        {% endfor %}
      </tr>
    {% endfor %}
    </tbody>
  </table>

{% endfor %}

{% endblock %}

</body>
</html>
